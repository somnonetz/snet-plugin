#set ($user = $data.getSession().getAttribute("userHelper"))
#set ($nrScans = $om.getSortedScans().size())
#set ($nrRecords = $user.getQueryResultsAsArrayList("SELECT * FROM snet01_psgscandata_record").size()) 
#set ($recordCount = $scanCounter+$nrScans)
#set ($imageScanId = $scan.getProperty("xnat_imagescandata_id"))
#set ($query = "SELECT channelnumberdevice, labeldevice, samplingrate FROM snet01_psgscandata_record WHERE records_record_snet01_psgscanda_xnat_imagescandata_id = $imageScanId ORDER BY channelnumberdevice")
#set ($records = $user.getQueryResultsAsArrayList($query))

<h1> EDF Headers </h1>

<table>
	#if($scan.getProperty("quality"))
	<tr>
		<td></td>
		<td>Quality</td>
		<td align="left">$!scan.getProperty("quality")</td>
	</tr>
	#end
	#if($scan.getProperty("psgdevice"))
	<tr>
		<td></td>
		<td>PSG-Model</td>
		<td align="left">$!scan.getProperty("psgdevice")</td>
	</tr>
	#end
	#if($scan.getProperty("recordingstartdate"))
	<tr>
		<td></td>
		<td>Recording Start Date</td>
		<td align="left">$!scan.getProperty("recordingstartdate")</td>
	</tr>
	#end
	#if($scan.getProperty("recordingstarttime"))
	<tr>
		<td></td>
		<td>Recording Start Time</td>
		<td align="left">$!scan.getProperty("recordingstarttime")</td>
	</tr>
	#end
	#if($scan.getProperty("durationofrecordhours"))
	<tr>
		<td></td>
		<td>Duration of Record (hours)</td>
		<td align="left">$!scan.getProperty("durationofrecordhours")</td>
	</tr>
	#end
	#if($scan.getProperty("numberofsignalsindatarecord"))
	<tr>
		<td></td>
		<td>Number of Channels</td>
		<td align="left">$!scan.getProperty("numberofsignalsindatarecord")</td>
	</tr>	
	#end
</table>

<h2>Channel Headers</h2>

<table style="border-bottom:0">	
	<tr>
		<td><strong>Channel</strong></td>
		<td><strong>Label</strong></td>
		<td><strong>Samplingrate [Hz]</strong></td>
	</tr>	
	#foreach($record in $records)
		<tr>
			<td>$record.get(0)</td>
			<td>$record.get(1)</td>
			<td>$record.get(2)</td>
		</tr>	
	#end
</table>
